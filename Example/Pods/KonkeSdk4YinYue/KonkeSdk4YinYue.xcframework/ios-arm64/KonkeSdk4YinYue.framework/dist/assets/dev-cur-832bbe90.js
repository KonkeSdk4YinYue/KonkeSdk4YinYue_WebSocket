import{h as W,q as D,s as N,b as C,_ as Z,c as $,a as r,g as p,v as ee,o as te,p as oe,d as ne,e as ie}from"./_plugin-vue_export-helper-4f5b7d1e.js";import{c as ae,N as P,n as R,U as se,D as re,a5 as T,l as E,ab as le,f as ce,ac as de,C as ue,J as me,a2 as ve,w as he}from"./index-bf3f378e.js";import{_ as _e}from"./nav-bar-1594fc52.js";import{g as fe}from"./urlparse-f25d0f77.js";import{e as U,f as ge}from"./api-308b1525.js";import{a as be}from"./use-touch-6a5c47ae.js";import{a as y}from"./function-call-4776fd23.js";import"./index-fb04ff69.js";import"./index-a604daa8.js";const[Ce,S]=ae("slider"),we={min:P(0),max:P(100),step:P(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:R,buttonSize:R,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var ye=W({name:Ce,props:we,emits:["change","dragEnd","dragStart","update:modelValue"],setup(e,{emit:o,slots:u}){let m,i,a;const h=D(),_=[D(),D()],c=D(),V=be(),w=N(()=>Number(e.max)-Number(e.min)),Y=N(()=>{const t=e.vertical?"width":"height";return{background:e.inactiveColor,[t]:ce(e.barHeight)}}),g=t=>e.range&&Array.isArray(t),z=()=>{const{modelValue:t,min:n}=e;return g(t)?`${(t[1]-t[0])*100/w.value}%`:`${(t-Number(n))*100/w.value}%`},j=()=>{const{modelValue:t,min:n}=e;return g(t)?`${(t[0]-Number(n))*100/w.value}%`:"0%"},M=N(()=>{const n={[e.vertical?"height":"width"]:z(),background:e.activeColor};c.value&&(n.transition="none");const s=()=>e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left";return n[s()]=j(),n}),k=t=>{const n=+e.min,s=+e.max,d=+e.step;t=ve(t,n,s);const l=Math.round((t-n)/d)*d;return de(n,l)},O=t=>{var n,s;const d=(n=t[0])!=null?n:Number(e.min),l=(s=t[1])!=null?s:Number(e.max);return d>l?[l,d]:[d,l]},b=(t,n)=>{g(t)?t=O(t).map(k):t=k(t),T(t,e.modelValue)||o("update:modelValue",t),n&&!T(t,a)&&o("change",t)},X=t=>{if(t.stopPropagation(),e.disabled||e.readonly)return;const{min:n,reverse:s,vertical:d,modelValue:l}=e,v=E(h),J=()=>d?s?v.bottom-t.clientY:t.clientY-v.top:s?v.right-t.clientX:t.clientX-v.left,G=d?v.height:v.width,I=Number(n)+J()/G*w.value;if(g(l)){const[L,A]=l,Q=(L+A)/2;I<=Q?b([I,A],!0):b([L,I],!0)}else b(I,!0)},F=t=>{e.disabled||e.readonly||(V.start(t),i=e.modelValue,g(i)?a=i.map(k):a=k(i),c.value="start")},H=t=>{if(e.disabled||e.readonly)return;c.value==="start"&&o("dragStart",t),ue(t,!0),V.move(t),c.value="dragging";const n=E(h),s=e.vertical?V.deltaY.value:V.deltaX.value,d=e.vertical?n.height:n.width;let l=s/d*w.value;if(e.reverse&&(l=-l),g(a)){const v=e.reverse?1-m:m;i[v]=a[v]+l}else i=a+l;b(i)},B=t=>{e.disabled||e.readonly||(c.value==="dragging"&&(b(i,!0),o("dragEnd",t)),c.value="")},K=t=>typeof t=="number"?S("button-wrapper",["left","right"][t]):S("button-wrapper",e.reverse?"left":"right"),q=(t,n)=>{if(typeof n=="number"){const s=u[n===0?"left-button":"right-button"];if(s)return s({value:t})}return u.button?u.button({value:t}):C("div",{class:S("button"),style:me(e.buttonSize)},null)},x=t=>{const n=typeof t=="number"?e.modelValue[t]:e.modelValue;return C("div",{ref:_[t??0],role:"slider",class:K(t),tabindex:e.disabled?void 0:0,"aria-valuemin":e.min,"aria-valuenow":n,"aria-valuemax":e.max,"aria-disabled":e.disabled||void 0,"aria-readonly":e.readonly||void 0,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstartPassive:s=>{typeof t=="number"&&(m=t),F(s)},onTouchend:B,onTouchcancel:B,onClick:le},[q(n,t)])};return b(e.modelValue),se(()=>e.modelValue),_.forEach(t=>{re("touchmove",H,{target:t})}),()=>C("div",{ref:h,style:Y.value,class:S({vertical:e.vertical,disabled:e.disabled}),onClick:X},[C("div",{class:S("bar"),style:M.value},[e.range?[x(0),x(1)]:x()])])}});const Se=he(ye);const Ve=""+new URL("ic_cur-21ee381f.svg",import.meta.url).href,ke=""+new URL("ic_cur_open-9a47319f.svg",import.meta.url).href,Ie=""+new URL("ic_cur_pause-46e2ae4a.svg",import.meta.url).href,De=""+new URL("ic_cur_close-3f770104.svg",import.meta.url).href;const xe={name:"KonkeSdk4YinYueSrcApp",data(){return{devId:0,userDevice:{},value:0,showPosition:!1}},mounted(){window.__eventBus.on("reload",e=>{this.getDevInfo()}),this.getParams(),window.__eventBus.on("deviceEvent",e=>{var o,u,m;console.log("deviceEvent",e),e.userDeviceId==this.devId&&(this.userDevice.cache.extension=e.extension,this.value=(m=(u=(o=this.userDevice)==null?void 0:o.cache)==null?void 0:u.extension)==null?void 0:m.position)})},methods:{onChange(e){U(this.devId,"SetPosition",{position:e}).then(o=>{y("控制成功")}).catch(o=>y(o.info))},onClickLeft(){window.__jsb.pop()},onClickRight(){window.__jsb.push({route:"devedit",params:{devId:this.devId}})},getParams(){let e=window.location.search;const o=fe(e);console.log(o),o!=null&&"devId"in o&&(this.devId=o.devId,this.getDevInfo())},getDevInfo(){ge({userDeviceId:this.devId}).then(e=>{var o,u,m,i,a,h,_;console.log(e),this.userDevice=e.data.userDeviceList[0],this.value=(m=(u=(o=this.userDevice)==null?void 0:o.cache)==null?void 0:u.extension)==null?void 0:m.position,this.showPosition=(_=(h=(a=(i=this.userDevice)==null?void 0:i.device)==null?void 0:a.deviceType)==null?void 0:h.actionList)==null?void 0:_.includes("SetPosition")}).catch(e=>y(e.info))},devControl(e){U(this.devId,e).then(o=>{y("控制成功")}).catch(o=>y(o.info))}}},f=e=>(oe("data-v-2737cfe5"),e=e(),ne(),e),Ne={class:"home"},Pe=f(()=>r("div",{class:"icon"},[r("img",{src:Ve})],-1)),Be={class:"bottom"},Le={class:"bottom_mode"},Ae={class:"bottom_main"},Re=f(()=>r("img",{class:"bottom_img",src:ke},null,-1)),Te=f(()=>r("div",{class:"bottom_tv"},"开启",-1)),Ee=[Re,Te],Ue=f(()=>r("img",{class:"bottom_img",src:Ie},null,-1)),Ye=f(()=>r("div",{class:"bottom_tv"},"暂停",-1)),ze=[Ue,Ye],je=f(()=>r("img",{class:"bottom_img",src:De},null,-1)),Me=f(()=>r("div",{class:"bottom_tv"},"关闭",-1)),Oe=[je,Me];function Xe(e,o,u,m,i,a){const h=_e,_=Se;return te(),$("div",Ne,[C(h,{class:"nav_bar",title:i.userDevice.deviceName,onClickLeft:a.onClickLeft,"right-text":"编辑",onClickRight:a.onClickRight},null,8,["title","onClickLeft","onClickRight"]),Pe,r("div",Be,[p(r("div",Le,[C(_,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=c=>i.value=c),"bar-height":"20px","active-color":"#FD7D28",max:"100",step:"1",onChange:a.onChange},null,8,["modelValue","onChange"])],512),[[ee,i.showPosition]]),r("div",Ae,[r("div",{class:"div_line_1",onClick:o[1]||(o[1]=c=>a.devControl("TurnOn"))},Ee),r("div",{class:"div_line_2",onClick:o[2]||(o[2]=c=>a.devControl("Pause"))},ze),r("div",{class:"div_line_3",onClick:o[3]||(o[3]=c=>a.devControl("TurnOff"))},Oe)])])])}const Fe=Z(xe,[["render",Xe],["__scopeId","data-v-2737cfe5"]]);ie(Fe).mount("#root");
