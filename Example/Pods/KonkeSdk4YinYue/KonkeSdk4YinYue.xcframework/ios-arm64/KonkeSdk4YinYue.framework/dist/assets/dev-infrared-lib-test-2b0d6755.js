import{_ as b,o as f,c as C,a as o,t as a,b as i,w as _,f as m,e as w}from"./_plugin-vue_export-helper-4f5b7d1e.js";import{_ as g}from"./sure-alert-14ff736e.js";import"./index-bf3f378e.js";/* empty css              *//* empty css              *//* empty css              */import{B as x}from"./index-e93e7391.js";import{_ as L}from"./nav-bar-1594fc52.js";import{g as y}from"./urlparse-f25d0f77.js";import{i as k,c as B,e as T}from"./api-308b1525.js";import{a as c}from"./function-call-4776fd23.js";import{P as A}from"./index-fb04ff69.js";import"./use-route-2687c77d.js";import"./index-a604daa8.js";import"./use-touch-6a5c47ae.js";const U={name:"infrared-able",props:{text:""},data(){return{}},mounted(){},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){this.$emit("onConfirm")}}},O={class:"demo-component"},P={class:"text"},R={class:"btn_line"},D={class:"btn_cancel"},E={class:"btn_sure"};function S(e,t,d,h,n,s){const l=x;return f(),C("div",O,[o("div",P,a(d.text),1),o("div",R,[o("div",D,[i(l,{type:"success",color:"#FFDEC8",onClick:s.onClickLeft},{default:_(()=>[m("不可用")]),_:1},8,["onClick"])]),o("div",E,[i(l,{type:"success",color:"#FD7D28",onClick:s.onClickRight},{default:_(()=>[m(" 可用 ")]),_:1},8,["onClick"])])])])}const j=b(U,[["render",S],["__scopeId","data-v-147b4e99"]]),p=""+new URL("ic_infrared_power-817c6f9d.svg",import.meta.url).href,N=""+new URL("ic_infrared_temp_add-87e0d3ef.svg",import.meta.url).href,K=""+new URL("ic_infrared_temp_sub-160f5370.svg",import.meta.url).href,F=""+new URL("ic_infrared_sound_add-ab45f8c1.svg",import.meta.url).href,H=""+new URL("ic_infrared_sound_sub-66647725.svg",import.meta.url).href;const V={components:{SureAlert:g},data(){return{lib_enable_show:!1,hint_pop_show:!1,libList:[],curLibIndex:0,devId:-1,brandId:-1,type:"",testBtnImg:p,acTestKey:[1,13,14],tvTestKey:[1,3,2],curCodeIndex:0,enabletext:"",codeLibId:0,nodeId:""}},mounted(){this.getUrlParams()},methods:{getUrlParams(){let e=window.location.search;const t=y(e);console.log(t),t!=null&&"devId"in t&&(this.devId=t.devId,console.log(this.devId)),t!=null&&"type"in t&&(this.type=t.type),t!=null&&"brandId"in t&&(this.brandId=t.brandId),t!=null&&"nodeId"in t&&(this.nodeId=t.nodeId),this.getLibs()},onClickLeft(){window.__jsb.pop()},getLibs(){k(this.devId,this.brandId,this.type).then(e=>{if(this.libList=e.data.modelList,this.libList==null||this.libList.length==0){c("没有获取到码库,请返回选择其他品牌");return}this.getCodes()}).catch(e=>{c(e)})},getCodes(){B(this.devId,this.brandId,this.type,this.libList[this.curLibIndex]).then(e=>{console.log("codes",e),this.codeLibId=e.data.codeList[0]}).catch(e=>{c(e)})},onClickHint(){this.hint_pop_show=!1},onEnableCancel(){if(this.curLibIndex>=this.libList.length-1){c("该品牌码库已匹配结束,请返回上一级选择其他品牌");return}this.curCodeIndex=0,this.curLibIndex++,this.getCodes(),this.changeBtn(),this.hint_pop_show=!0,this.lib_enable_show=!1},onEnableConfirm(){if(this.lib_enable_show=!1,this.curCodeIndex==2){let e={};e.rcType=this.type,e.codeId=this.codeLibId,e.codeType="cloud",window.__jsb.forwardEvent({eventName:"infraredLibCode",eventData:JSON.stringify(e),fromPage:"dev-infrared-lib-test",toPage:"dev-infrared-edit"}),window.__jsb.pop({route:"dev-infrared-edit"});return}this.curCodeIndex++,this.changeBtn()},sendCode(){const e=this.type=="AC"?this.acTestKey[this.curCodeIndex]:this.tvTestKey[this.curCodeIndex];T(this.devId,"Testing",{value:e,codeLibId:this.codeLibId,nodeId:this.nodeId}).then(t=>{console.log("Testing",t),this.lib_enable_show=!0}).catch(t=>{c(t)})},changeBtn(){if(!(this.curCodeIndex>2))if(this.type=="AC")switch(this.curCodeIndex){case 0:this.testBtnImg=p;break;case 1:this.testBtnImg=N;break;case 2:this.testBtnImg=K;break}else switch(this.curCodeIndex){case 0:this.testBtnImg=p;break;case 1:this.testBtnImg=F;break;case 2:this.testBtnImg=H;break}},uuid(){for(var e=[],t="0123456789abcdef",d=0;d<32;d++)e[d]=t.substr(Math.floor(Math.random()*16),1);e[14]="4",e[19]=t.substr(e[19]&3|8,1),e[8]=e[13]=e[18]=e[23];var h=e.join("");return h}}},M={class:"home"},J={class:"test_group"},q={class:"test_hint"},z=["src"];function G(e,t,d,h,n,s){const l=L,I=j,u=A,v=g;return f(),C("div",M,[i(l,{class:"nav_bar",title:"匹配码库",onClickLeft:s.onClickLeft},null,8,["onClickLeft"]),o("div",J,"正在测试第"+a(n.curLibIndex+1)+"组(一共"+a(n.libList.length)+"组)",1),o("div",q,"请将红外遥控器对准"+a(n.type=="AC"?"空调":"电视")+"，点击下面按钮 然后确认"+a(n.type=="AC"?"空调":"电视")+"是否有响应 ",1),o("div",{class:"test_btn",onClick:t[0]||(t[0]=(...r)=>s.sendCode&&s.sendCode(...r))},[o("img",{src:n.testBtnImg},null,8,z)]),i(u,{show:n.lib_enable_show,"onUpdate:show":t[1]||(t[1]=r=>n.lib_enable_show=r),round:"",position:"bottom"},{default:_(()=>[i(I,{text:"设备是否可用",onOnCancal:s.onEnableCancel,onOnConfirm:s.onEnableConfirm},null,8,["onOnCancal","onOnConfirm"])]),_:1},8,["show"]),i(u,{show:n.hint_pop_show,"onUpdate:show":t[2]||(t[2]=r=>n.hint_pop_show=r),round:"",position:"center",style:{paddingLeft:"64px",paddingRight:"64px"}},{default:_(()=>[i(v,{text:"请先关闭您的"+(n.type=="AC"?"空调":"电视")+"，再开始进行匹配",cancelText:"返回",sureText:"确定已关闭",onOnCancal:s.onClickHint,onOnConfirm:s.onClickHint},null,8,["text","onOnCancal","onOnConfirm"])]),_:1},8,["show"])])}const Q=b(V,[["render",G],["__scopeId","data-v-e1d95998"]]);w(Q).mount("#root");
