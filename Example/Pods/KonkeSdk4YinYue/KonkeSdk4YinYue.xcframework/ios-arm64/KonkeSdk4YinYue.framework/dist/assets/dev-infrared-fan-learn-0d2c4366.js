import{_ as m,c as f,a as o,b as l,n as i,w as p,o as g,p as v,d as y,e as k}from"./_plugin-vue_export-helper-4f5b7d1e.js";import{w as L}from"./index-bf3f378e.js";/* empty css              *//* empty css              */import{_ as I}from"./sure-alert-one-73a85f24.js";import{_ as C}from"./nav-bar-1594fc52.js";import{_ as b}from"./sure-alert-14ff736e.js";import{n as w,a as S,d as B,b as V}from"./api-308b1525.js";import{g as N}from"./urlparse-f25d0f77.js";import{_ as x}from"./ic_infrared_fan-0c21a6f3.js";import{_ as D}from"./ic_tv_on-d8b22e33.js";import{i as P,a as R,b as j}from"./ic_speed_high-89fd3487.js";import{s as A,a as c}from"./function-call-4776fd23.js";import{P as E}from"./index-fb04ff69.js";/* empty css              */import"./index-e93e7391.js";import"./use-route-2687c77d.js";import"./index-a604daa8.js";import"./use-touch-6a5c47ae.js";L(A);const O={components:{SureAlert:b},data(){return{devId:-1,userDevice:{},hasLearnButton:[],learnDialogShow:!1,curLearnCode:0,keyList:[{keyId:0,keyName:"POWER",keyValue:"1",learned:!1},{keyId:0,keyName:"LOW",keyValue:"2",learned:!1},{keyId:0,keyName:"MID",keyValue:"3",learned:!1},{keyId:0,keyName:"HIGH",keyValue:"4",learned:!1}]}},mounted(){this.getUrlParams(),window.__eventBus.on("learnCodeNotify",t=>{console.log("on",t);const e=t.extension.currentNode;console.log("keyValue 判断",e.keyValue,this.curLearnCode,e.keyValue!=this.curLearnCode),console.log("learnSuccess 判断",e.learnSuccess,e.learnSuccess=="true"),e.keyValue+""==this.curLearnCode&&e.learnSuccess=="true"&&(this.onLearnCancel(),this.saveCode(this.curLearnCode))})},methods:{hasIncluedeButton(t){return this.hasLearnButton.includes(t)},getUrlParams(){let t=window.location.search;const e=N(t);console.log(e),e!=null&&"devId"in e&&(this.devId=e.devId,console.log(this.devId)),e!=null&&"type"in e&&(this.type=e.type),e!=null&&"brandId"in e&&(this.brandId=e.brandId),e!=null&&"nodeId"in e&&(this.nodeId=e.nodeId),this.getLearnedButton()},onClickLeft(){window.__jsb.pop()},learnCode(t){w(this.devId,this.nodeId,t).then(e=>{this.learnDialogShow=!0,this.curLearnCode=t}).catch(e=>{c(e)})},onLearnCancel(){this.learnDialogShow=!1},saveCode(t){S(this.devId,this.nodeId,t).then(e=>{this.hasLearnButton.push(t),this.keyList.forEach(r=>{r.keyValue==t&&(r.learned=!0)})})},getLearnedButton(){B(this.devId).then(t=>{console.log("getkeys",this.keyList.length,t.data.remoterKeysList.length),this.keyList.length==t.data.remoterKeysList.length&&(this.keyList=t.data.remoterKeysList),this.keyList.forEach(e=>{e.learned&&!this.hasLearnButton.includes(parseInt(e.keyValue))&&this.hasLearnButton.push(parseInt(e.keyValue))})}).catch(t=>{console.log("getrc ",t)})},onClickRight(){if(this.keyList.length==0){c("最少学习一个按钮");return}V(this.devId,this.nodeId,this.keyList).then(t=>{console.log(t);const e={};e.rcType=this.type,e.codeType="self",e.keyList=this.keyList,window.__jsb.forwardEvent({eventName:"infraredLibCode",eventData:JSON.stringify(e),fromPage:"dev-infrared-fan-learn",toPage:"dev-infrared-edit"}),window.__jsb.pop({route:"dev-infrared-edit"})})}}},n=t=>(v("data-v-38ee4cff"),t=t(),y(),t),K={class:"home"},T=n(()=>o("img",{class:"img",src:x},null,-1)),U={class:"bottom"},H={class:"bottom_main"},M=n(()=>o("img",{class:"bottom_img",src:D},null,-1)),W=n(()=>o("div",{class:"bottom_tv"},"开关",-1)),z=[M,W],G=n(()=>o("img",{class:"bottom_img",src:P},null,-1)),J=n(()=>o("div",{class:"bottom_tv"},"低风",-1)),q=[G,J],F=n(()=>o("img",{class:"bottom_img",src:R},null,-1)),Q=n(()=>o("div",{class:"bottom_tv"},"中风",-1)),X=[F,Q],Y=n(()=>o("img",{class:"bottom_img",src:j},null,-1)),Z=n(()=>o("div",{class:"bottom_tv"},"高风",-1)),$=[Y,Z];function ee(t,e,r,oe,d,s){const _=C,h=I,u=E;return g(),f("div",K,[o("div",null,[l(_,{class:"nav_bar",title:"红外学习","right-text":"保存",onClickRight:s.onClickRight,onClickLeft:s.onClickLeft},null,8,["onClickRight","onClickLeft"])]),T,o("div",U,[o("div",H,[o("div",{class:"div_line_1",style:i({background:s.hasIncluedeButton(1)?"#f4f4f4":"#a19f9f"}),onClick:e[0]||(e[0]=a=>s.learnCode(1))},z,4),o("div",{class:"div_line_2",style:i({background:s.hasIncluedeButton(2)?"#f4f4f4":"#a19f9f"}),onClick:e[1]||(e[1]=a=>s.learnCode(2))},q,4),o("div",{class:"div_line_3",style:i({background:s.hasIncluedeButton(3)?"#f4f4f4":"#a19f9f"}),onClick:e[2]||(e[2]=a=>s.learnCode(3))},X,4),o("div",{class:"div_line_4",style:i({background:s.hasIncluedeButton(4)?"#f4f4f4":"#a19f9f"}),onClick:e[3]||(e[3]=a=>s.learnCode(4))},$,4)])]),l(u,{show:d.learnDialogShow,"onUpdate:show":e[4]||(e[4]=a=>d.learnDialogShow=a),round:"",position:"center",style:{paddingLeft:"64px",paddingRight:"64px"}},{default:p(()=>[l(h,{text:"请使用电视遥控器面对红外遥控器按下该按钮",cancelText:"取消学习",onOnCancal:s.onLearnCancel},null,8,["onOnCancal"])]),_:1},8,["show"])])}const te=m(O,[["render",ee],["__scopeId","data-v-38ee4cff"]]);k(te).mount("#root");
