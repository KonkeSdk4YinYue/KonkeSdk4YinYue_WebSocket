import{_ as C,c as d,b as r,a as s,w as M,F as f,r as g,g as p,v as m,o as _,t as u,Q as w,p as x,d as y,e as N}from"./_plugin-vue_export-helper-4f5b7d1e.js";import"./index-bf3f378e.js";/* empty css              */import{S as T}from"./index-4a564f33.js";import{T as V,a as j}from"./index-284dcd17.js";import{_ as E}from"./nav-bar-1594fc52.js";import{P as F,Q as B,s as L}from"./api-308b1525.js";import{g as S}from"./scene-cfbe032f.js";import{_ as k}from"./ic_scene1-0f866639.js";import{_ as U}from"./ic_add_room-ca6db507.js";import{a as h}from"./function-call-4776fd23.js";import"./index-a604daa8.js";import"./use-id-30d68b53.js";import"./use-touch-6a5c47ae.js";import"./use-route-2687c77d.js";import"./dev-image-f6fc399c.js";import"./index-fb04ff69.js";const Q={name:"KonkeSdk4YinYueSrcApp",data(){return{active:0,sceneManualList:[],sceneAutoList:[],showAddIcon:!0}},mounted(){window.__eventBus.on("reload",e=>{this.getManualList(),this.getAutoList()}),this.getManualList(),this.getAutoList()},methods:{stringWithMaxLength(e,t){return e.length>t?e.substring(0,t)+"...":e},onClickLeft(){window.__jsb.pop()},editManualScene(e){window.__jsb.push({route:"scene-manual",params:{sceneId:e.sceneId}})},editAutoScene(e){window.__jsb.push({route:"scene-auto",params:{sceneId:e.sceneId}})},async executeScene(e){try{await F({sceneId:e.sceneId}),h("执行成功")}catch(t){console.log(t),h("执行失败")}},changeState(e){e.state,B(e.sceneId,e.state).then(t=>{}).catch(t=>{h(t)})},getManualList(){L(!0).then(e=>{this.sceneManualList=e.data.sceneList,this.sceneManualList.forEach(t=>{let n="";t.actionList.forEach(a=>{a.actionType=="Device"&&(n+=S(a.actionName),n+=a.userDevice.deviceName,n+="、")}),t.desc=n})}).catch(e=>console.log(e))},getAutoList(){L(!1).then(e=>{this.sceneAutoList=e.data.sceneList,this.sceneAutoList.forEach(t=>{let n="";t.actionList.forEach(a=>{a.actionType=="Device"&&(n+=S(a.actionName),n+=a.userDevice.deviceName,n+="、")}),t.desc=n})}).catch(e=>console.log(e))},addScene(){this.active==0?window.__jsb.push({route:"scene-manual",params:{sceneId:-1}}):window.__jsb.push({route:"scene-auto",params:{sceneId:-1}})}}},b=e=>(x("data-v-8abf1fc3"),e=e(),y(),e),W={class:"home"},Y={class:"tab_line"},K={class:"scene_list"},P=["onClick"],q=b(()=>s("div",{class:"scene_img"},[s("img",{src:k})],-1)),z={class:"scene_name"},G={class:"scene_desc"},H=["onClick"],J={class:"scene_list"},O=["onClick"],R=b(()=>s("div",{class:"scene_img"},[s("img",{src:k})],-1)),X={class:"scene_name"},Z={class:"scene_desc"},$={class:"checkStatus"};function ee(e,t,n,a,i,o){const A=E,v=j,D=V,I=T;return _(),d("div",W,[r(A,{class:"nav_bar",title:"场景",onClickLeft:o.onClickLeft},null,8,["onClickLeft"]),s("div",Y,[r(D,{active:i.active,"onUpdate:active":t[0]||(t[0]=c=>i.active=c),color:"#FD7D28","title-active-color":"#FD7D28","title-inactive-color":"#666666",sticky:"",animated:"",shrink:""},{default:M(()=>[r(v,{title:"手动场景",name:"0"}),r(v,{title:"自动场景",name:"1"})]),_:1},8,["active"])]),(_(!0),d(f,null,g(i.sceneManualList,c=>p((_(),d("div",K,[s("div",{class:"scene_item",onClick:l=>o.editManualScene(c)},[q,s("div",null,[s("span",z,u(c.sceneName),1),s("span",G,u(o.stringWithMaxLength(c.desc,15)),1)]),s("div",{class:"exec",onClick:w(l=>o.executeScene(c),["stop"])},"执行",8,H)],8,P)],512)),[[m,i.active==0]])),256)),(_(!0),d(f,null,g(i.sceneAutoList,c=>p((_(),d("div",J,[s("div",{class:"scene_item",onClick:l=>o.editAutoScene(c)},[R,s("div",null,[s("span",X,u(c.sceneName),1),s("span",Z,u(c.desc),1)]),s("div",$,[r(I,{modelValue:c.state,"onUpdate:modelValue":l=>c.state=l,"active-color":"#FD7D28","inactive-color":"#dcdee0",onClick:w(l=>{o.changeState(c)},["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])])],8,O)],512)),[[m,i.active==1]])),256)),p(s("img",{class:"add_icon",src:U,alt:"",style:{width:"75px",height:"75px"},onClick:t[1]||(t[1]=(...c)=>o.addScene&&o.addScene(...c))},null,512),[[m,i.showAddIcon]])])}const te=C(Q,[["render",ee],["__scopeId","data-v-8abf1fc3"]]);N(te).mount("#root");
