import{_ as T,c as n,b as a,w as A,F as u,r as g,j as _,o as t,a as l,t as m,k as y,p as C,d as x,e as w}from"./_plugin-vue_export-helper-4f5b7d1e.js";import{_ as E}from"./no-data-2cec964c.js";import{I as N}from"./index-bf3f378e.js";import{T as S,a as z}from"./index-284dcd17.js";import{_ as B}from"./nav-bar-1594fc52.js";import{y as L,z as V,A as Y,f as j}from"./api-308b1525.js";import{g as k}from"./dev-image-f6fc399c.js";import{d as K}from"./dev-filter-432b904c.js";import"./index-fdb18838.js";import"./use-id-30d68b53.js";import"./use-touch-6a5c47ae.js";import"./use-route-2687c77d.js";const P={name:"KonkeSdk4YinYueSrcApp",data(){return{isEditing:!1,tabIndex:0,frequentDevices:[],allDevices:[],frequentDevIds:[]}},mounted(){this.reloadAll()},methods:{async addToFrequent(e){try{await L({frequentType:"Device",userDeviceId:e.userDeviceId}),this.reloadAll()}catch(c){console.log(c)}},async removeFromFrequent(e){try{await V({frequentId:e.frequentId}),this.reloadAll()}catch(c){console.log(c)}},async reloadAll(){await Promise.all([this.getFrequentDevices(),this.getAllDevices()]),this.calculateDevices()},async getFrequentDevices(){try{const{data:e}=await Y(),{frequentList:c}=e;this.frequentDevices=c.filter(o=>o.frequentType=="Device").map(o=>{var r,s;return{...o.userDevice,frequentId:o.frequentId,icon:k((s=(r=o.userDevice)==null?void 0:r.device)==null?void 0:s.cateType)}})||[],this.frequentDevIds=this.frequentDevices.map(o=>o.userDeviceId)||[]}catch(e){this.frequentDevices=[],this.frequentDevIds=[],console.log(e)}},async getAllDevices(){try{const{data:e}=await j(),{userDeviceList:c}=e;c.forEach(o=>{var r;o.icon=k((r=o.device)==null?void 0:r.cateType)}),this.allDevices=K(c.filter(o=>!this.frequentDevIds.includes(o.userDeviceId))||[])}catch(e){this.allDevices=[],console.log(e)}},async calculateDevices(){console.log(this.frequentDevices,this.allDevices,"calculateDevices")},onClickTab(e){console.log(e)}}},q=e=>(C("data-v-6f9df50a"),e=e(),x(),e),R={class:"home"},U={key:0,class:"devices-grid"},G=["src"],H=q(()=>l("div",{class:"spacer"},null,-1)),J={class:"device-name"},M={class:"room-name"},O={key:2,class:"dev-top-right-icon"},Q={key:0,class:"devices-grid"},W=["src"],X=q(()=>l("div",{class:"spacer"},null,-1)),Z={class:"device-name"},$={class:"room-name"},ee={key:2,class:"dev-top-right-icon"};function te(e,c,o,r,s,p){const I=B,f=z,F=S,v=N,D=E;return t(),n("div",R,[a(I,{title:"常用设备","right-text":s.isEditing?"完成":"编辑",onClickRight:c[0]||(c[0]=i=>s.isEditing=!s.isEditing),border:!1},null,8,["right-text"]),a(F,{active:s.tabIndex,"onUpdate:active":c[1]||(c[1]=i=>s.tabIndex=i),shrink:"",onClickTab:p.onClickTab},{default:A(()=>[a(f,{title:"常用设备"}),a(f,{title:"非常用设备"})]),_:1},8,["active","onClickTab"]),s.tabIndex==0?(t(),n(u,{key:0},[s.frequentDevices.length>0?(t(),n("div",U,[(t(!0),n(u,null,g(s.frequentDevices,(i,h)=>{var d;return t(),n("div",{key:h,class:"device-item"},[((d=i.icon)==null?void 0:d.length)>0?(t(),n("img",{key:0,src:i.icon,class:"device-icon"},null,8,G)):(t(),_(v,{key:1,name:"question-o",size:"40",color:"#ccc"})),H,l("div",J,m(i.deviceName),1),l("div",M,m(i.roomName),1),s.isEditing?(t(),n("div",O,[a(v,{name:"clear",size:"22",color:"#FD7D28FF",onClick:b=>p.removeFromFrequent(i)},null,8,["onClick"])])):y("",!0)])}),128))])):(t(),_(D,{key:1}))],64)):(t(),n(u,{key:1},[s.allDevices.length>0?(t(),n("div",Q,[(t(!0),n(u,null,g(s.allDevices,(i,h)=>{var d;return t(),n("div",{key:h,class:"device-item"},[((d=i.icon)==null?void 0:d.length)>0?(t(),n("img",{key:0,src:i.icon,class:"device-icon"},null,8,W)):(t(),_(v,{key:1,name:"question-o",size:"40",color:"#ccc"})),X,l("div",Z,m(i.deviceName),1),l("div",$,m(i.roomName),1),s.isEditing?(t(),n("div",ee,[a(v,{name:"add",size:"22",color:"#FD7D28FF",onClick:b=>p.addToFrequent(i)},null,8,["onClick"])])):y("",!0)])}),128))])):(t(),_(D,{key:1}))],64))])}const se=T(P,[["render",te],["__scopeId","data-v-6f9df50a"]]);w(se).mount("#root");
