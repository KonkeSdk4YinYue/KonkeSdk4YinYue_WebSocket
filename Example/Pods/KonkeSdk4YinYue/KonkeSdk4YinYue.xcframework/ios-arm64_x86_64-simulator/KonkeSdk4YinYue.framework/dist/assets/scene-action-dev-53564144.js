import{_ as y,o as r,c as u,b as l,a as o,t as _,p as S,d as A,w as x,F as D,r as O,j as E,g as v,v as C,l as g,e as j}from"./_plugin-vue_export-helper-4f5b7d1e.js";import"./index-bf3f378e.js";/* empty css              *//* empty css              */import{E as H}from"./index-fdb18838.js";import{T as K,a as B}from"./index-284dcd17.js";import{_ as w}from"./nav-bar-1594fc52.js";import{C as T,a as G}from"./index-ebd2fbba.js";import"./index-b5a1cd1d.js";/* empty css              */import{T as b}from"./index-3b5238ca.js";import{a as p}from"./function-call-4776fd23.js";import{C as J}from"./index-6a50b8f9.js";import{C as Y}from"./index-e990ab3d.js";import{d as z,r as q,v as Q}from"./api-308b1525.js";import{S as W}from"./scene-action-light-component-699fb0c9.js";import{g as X}from"./dev-image-f6fc399c.js";import{g as Z}from"./urlparse-f25d0f77.js";import{d as $}from"./dev-filter-432b904c.js";import{P as ee}from"./index-fb04ff69.js";import"./use-id-30d68b53.js";import"./use-touch-6a5c47ae.js";import"./use-route-2687c77d.js";import"./index-a604daa8.js";const te={name:"SceneActionAc",props:{dev:{}},data(){return{columnsType:["minute","second"],currentTime:["00","00"],formatter:(h,n)=>(h==="hour"?n.text+="时":h==="minute"?n.text+="分":n.text+="秒",n),seldata:"00:00",checkIndex:-1,list:[{name:"打开",action:"TurnOn",check:!1,extension:null},{name:"关闭",action:"TurnOff",check:!1,extension:null}],checked:[],deley:0}},mounted(){},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){for(let t in this.list)if(this.list[t].check){this.checkIndex==t;break}if(console.log("checked",this.checked),this.checkIndex==-1){p("必须选择一个动作");return}console.log("checkIndex",this.checkIndex);let e=null;if(this.checkIndex==2||this.checkIndex==3){const t=this.list[this.checkIndex].extension;if(console.log("extList",t),t.forEach(s=>{s.check&&(e=s)}),console.log("extension",e),e==null){p("必须选择一个动作参数");return}}else this.checkIndex==4&&(e=this.list[this.checkIndex].extension);this.$emit("onConfirm",this.dev,this.checked[0],this.deley,e)},toggle(e,t){this.checked.splice(0,this.checked.length),this.checked.push(t),console.log(this.checked)},onTimeChange(e){this.seldata=e.selectedValues[0]+":"+e.selectedValues[1],this.deley=e.selectedValues[0]*60+e.selectedValues[1]},clickMode(e,t){e.forEach(s=>{s.check=s.workMode==t.workMode})},clickSpeed(e,t){e.forEach(s=>{s.check=s.windSpeed==t.windSpeed})},clickCheck(e){console.log(e),this.checked.splice(0,this.checked.length),this.checked.push(this.list[e].action),this.checkIndex=e,console.log(this.checked);for(let t in this.list)this.list[t].check=e==t}}},P=e=>(S("data-v-40f0964f"),e=e(),A(),e),ne={class:"demo-component"},oe={class:"time_sel_bg"},se={class:"time_show_line"},ce=P(()=>o("span",{class:"time_show_line_hint"}," 延迟时间 ",-1)),ie={class:"time_show_line_time"},le={class:"time_sel"},he={class:"time_sel_child"},ae={class:"action_list"},re={class:"turn_sel"},de={class:"turn_name"},_e={class:"checkbox"},me=P(()=>o("div",{class:"divider"},null,-1)),ue={class:"turn_sel"},fe={class:"turn_name"},ke={class:"checkbox"};function pe(e,t,s,h,n,c){const f=w,k=b,a=T;return r(),u("div",ne,[l(f,{class:"nav_bar",title:"选择动作","left-text":"取消","right-text":"确定",onClickRight:c.onClickRight,fixed:!1,onClickLeft:c.onClickLeft},null,8,["onClickRight","onClickLeft"]),o("div",oe,[o("div",se,[ce,o("span",ie,_(n.seldata),1)]),o("div",le,[o("div",he,[l(k,{"option-height":35,"visible-option-num":3,"show-toolbar":!1,modelValue:n.currentTime,"onUpdate:modelValue":t[0]||(t[0]=i=>n.currentTime=i),formatter:n.formatter,title:"选择时间","columns-type":n.columnsType,onChange:c.onTimeChange},null,8,["modelValue","formatter","columns-type","onChange"])])])]),o("div",ae,[o("div",re,[o("span",de,_(n.list[0].name),1),o("div",_e,[l(a,{modelValue:n.list[0].check,"onUpdate:modelValue":t[1]||(t[1]=i=>n.list[0].check=i),onClick:t[2]||(t[2]=i=>c.clickCheck(0))},null,8,["modelValue"])])]),me,o("div",ue,[o("span",fe,_(n.list[1].name),1),o("div",ke,[l(a,{modelValue:n.list[1].check,"onUpdate:modelValue":t[3]||(t[3]=i=>n.list[1].check=i),onClick:t[4]||(t[4]=i=>c.clickCheck(1))},null,8,["modelValue"])])])])])}const ve=y(te,[["render",pe],["__scopeId","data-v-40f0964f"]]);const Ce={name:"SceneActionFh",props:{dev:{}},data(){return{columnsType:["minute","second"],currentTime:["00","00"],formatter:(h,n)=>(h==="hour"?n.text+="时":h==="minute"?n.text+="分":n.text+="秒",n),seldata:"00:00",checkIndex:-1,list:[{name:"打开",action:"TurnOn",check:!1,extension:null},{name:"关闭",action:"TurnOff",check:!1,extension:null}],checked:[],deley:0}},mounted(){},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){for(let t in this.list)if(this.list[t].check){this.checkIndex==t;break}if(console.log("checked",this.checked),this.checkIndex==-1){p("必须选择一个动作");return}let e=null;this.checkIndex==2&&(e=this.list[this.checkIndex].extension),this.$emit("onConfirm",this.dev,this.checked[0],this.deley,e)},toggle(e,t){this.checked.splice(0,this.checked.length),this.checked.push(t),console.log(this.checked)},onTimeChange(e){this.seldata=e.selectedValues[0]+":"+e.selectedValues[1],this.deley=e.selectedValues[0]*60+e.selectedValues[1]},clickMode(e,t){e.forEach(s=>{s.check=s.workMode==t.workMode})},clickSpeed(e,t){e.forEach(s=>{s.check=s.windSpeed==t.windSpeed})},clickCheck(e){console.log(e),this.checked.splice(0,this.checked.length),this.checked.push(this.list[e].action),this.checkIndex=e;for(let t in this.list)this.list[t].check=e==t}}},U=e=>(S("data-v-af553af9"),e=e(),A(),e),ge={class:"demo-component"},xe={class:"time_sel_bg"},ye={class:"time_show_line"},we=U(()=>o("span",{class:"time_show_line_hint"}," 延迟时间 ",-1)),Se={class:"time_show_line_time"},Ae={class:"time_sel"},Te={class:"time_sel_child"},be={class:"action_list"},Le={class:"turn_sel"},Ie={class:"turn_name"},Ve={class:"checkbox"},De=U(()=>o("div",{class:"divider"},null,-1)),Oe={class:"turn_sel"},Re={class:"turn_name"},Fe={class:"checkbox"};function Ee(e,t,s,h,n,c){const f=w,k=b,a=T;return r(),u("div",ge,[l(f,{class:"nav_bar",title:"选择动作","left-text":"取消","right-text":"确定",onClickRight:c.onClickRight,fixed:!1,onClickLeft:c.onClickLeft},null,8,["onClickRight","onClickLeft"]),o("div",xe,[o("div",ye,[we,o("span",Se,_(n.seldata),1)]),o("div",Ae,[o("div",Te,[l(k,{"option-height":35,"visible-option-num":3,"show-toolbar":!1,modelValue:n.currentTime,"onUpdate:modelValue":t[0]||(t[0]=i=>n.currentTime=i),formatter:n.formatter,title:"选择时间","columns-type":n.columnsType,onChange:c.onTimeChange},null,8,["modelValue","formatter","columns-type","onChange"])])])]),o("div",be,[o("div",Le,[o("span",Ie,_(n.list[0].name),1),o("div",Ve,[l(a,{modelValue:n.list[0].check,"onUpdate:modelValue":t[1]||(t[1]=i=>n.list[0].check=i),onClick:t[2]||(t[2]=i=>c.clickCheck(0))},null,8,["modelValue"])])]),De,o("div",Oe,[o("span",Re,_(n.list[1].name),1),o("div",Fe,[l(a,{modelValue:n.list[1].check,"onUpdate:modelValue":t[3]||(t[3]=i=>n.list[1].check=i),onClick:t[4]||(t[4]=i=>c.clickCheck(1))},null,8,["modelValue"])])])])])}const Pe=y(Ce,[["render",Ee],["__scopeId","data-v-af553af9"]]);const Ue={name:"SceneActionFrishair",props:{dev:{}},data(){return{columnsType:["minute","second"],currentTime:["00","00"],formatter:(h,n)=>(h==="hour"?n.text+="时":h==="minute"?n.text+="分":n.text+="秒",n),seldata:"00:00",checkIndex:-1,list:[{name:"打开",action:"TurnOn",check:!1,extension:null},{name:"关闭",action:"TurnOff",check:!1,extension:null}],checked:[],deley:0}},mounted(){},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){for(let t in this.list)if(this.list[t].check){this.checkIndex==t;break}if(console.log("checked",this.checked),this.checkIndex==-1){p("必须选择一个动作");return}let e=null;if(this.checkIndex==2||this.checkIndex==3){if(this.list[this.checkIndex].extension.forEach(s=>{s.check&&(e=s)}),e==null){p("必须选择一个动作参数");return}}else this.checkIndex==4&&(e=this.list[this.checkIndex].extension);this.$emit("onConfirm",this.dev,this.checked[0],this.deley,e)},toggle(e,t){this.checked.splice(0,this.checked.length),this.checked.push(t),console.log(this.checked)},onTimeChange(e){this.seldata=e.selectedValues[0]+":"+e.selectedValues[1],this.deley=e.selectedValues[0]*60+e.selectedValues[1]},clickMode(e,t){e.forEach(s=>{s.check=s.workMode==t.workMode})},clickSpeed(e,t){e.forEach(s=>{s.check=s.windSpeed==t.windSpeed})},clickCheck(e){console.log(e),this.checked.splice(0,this.checked.length),this.checked.push(this.list[e].action),this.checkIndex=e;for(let t in this.list)this.list[t].check=e==t}}},N=e=>(S("data-v-4e923ffd"),e=e(),A(),e),Ne={class:"demo-component"},Me={class:"time_sel_bg"},je={class:"time_show_line"},He=N(()=>o("span",{class:"time_show_line_hint"}," 延迟时间 ",-1)),Ke={class:"time_show_line_time"},Be={class:"time_sel"},Ge={class:"time_sel_child"},Je={class:"action_list"},Ye={class:"turn_sel"},ze={class:"turn_name"},qe={class:"checkbox"},Qe=N(()=>o("div",{class:"divider"},null,-1)),We={class:"turn_sel"},Xe={class:"turn_name"},Ze={class:"checkbox"};function $e(e,t,s,h,n,c){const f=w,k=b,a=T;return r(),u("div",Ne,[l(f,{class:"nav_bar",title:"选择动作","left-text":"取消","right-text":"确定",onClickRight:c.onClickRight,fixed:!1,onClickLeft:c.onClickLeft},null,8,["onClickRight","onClickLeft"]),o("div",Me,[o("div",je,[He,o("span",Ke,_(n.seldata),1)]),o("div",Be,[o("div",Ge,[l(k,{"option-height":35,"visible-option-num":3,"show-toolbar":!1,modelValue:n.currentTime,"onUpdate:modelValue":t[0]||(t[0]=i=>n.currentTime=i),formatter:n.formatter,title:"选择时间","columns-type":n.columnsType,onChange:c.onTimeChange},null,8,["modelValue","formatter","columns-type","onChange"])])])]),o("div",Je,[o("div",Ye,[o("span",ze,_(n.list[0].name),1),o("div",qe,[l(a,{modelValue:n.list[0].check,"onUpdate:modelValue":t[1]||(t[1]=i=>n.list[0].check=i),onClick:t[2]||(t[2]=i=>c.clickCheck(0))},null,8,["modelValue"])])]),Qe,o("div",We,[o("span",Xe,_(n.list[1].name),1),o("div",Ze,[l(a,{modelValue:n.list[1].check,"onUpdate:modelValue":t[3]||(t[3]=i=>n.list[1].check=i),onClick:t[4]||(t[4]=i=>c.clickCheck(1))},null,8,["modelValue"])])])])])}const et=y(Ue,[["render",$e],["__scopeId","data-v-4e923ffd"]]);const tt={name:"SceneActionInfrared",props:{dev:{}},data(){return{columnsType:["minute","second"],currentTime:["00","00"],formatter:(h,n)=>(h==="hour"?n.text+="时":h==="minute"?n.text+="分":n.text+="秒",n),seldata:"00:00",checked:[],list:[],deley:0}},mounted(){this.getKeys()},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){if(console.log("checked",this.checked),this.checked.length==0){p("必须选择一个动作");return}let e={};this.list.forEach(s=>{s.keyId==this.checked[0]&&(e=s)});const t={keyID:e.keyId};this.$emit("onConfirm",this.dev,"SendData",this.deley,t)},toggle(e,t){this.checked.splice(0,this.checked.length),this.checked.push(t),console.log(this.checked)},onTimeChange(e){this.seldata=e.selectedValues[0]+":"+e.selectedValues[1],this.deley=e.selectedValues[0]*60+e.selectedValues[1]},getKeys(){z(this.dev.userDeviceId).then(e=>{this.list=e.data.remoterKeysList}).catch(e=>console.log(e))}}},nt=e=>(S("data-v-4df0d28f"),e=e(),A(),e),ot={class:"demo-component"},st={class:"time_sel_bg"},ct={class:"time_show_line"},it=nt(()=>o("span",{class:"time_show_line_hint"}," 延迟时间 ",-1)),lt={class:"time_show_line_time"},ht={class:"time_sel"},at={class:"time_sel_child"},rt={class:"action_list"};function dt(e,t,s,h,n,c){const f=w,k=b,a=T,i=Y,L=J,I=G;return r(),u("div",ot,[l(f,{class:"nav_bar",title:"选择动作","left-text":"取消","right-text":"确定",onClickRight:c.onClickRight,fixed:!1,onClickLeft:c.onClickLeft},null,8,["onClickRight","onClickLeft"]),o("div",st,[o("div",ct,[it,o("span",lt,_(n.seldata),1)]),o("div",ht,[o("div",at,[l(k,{"option-height":35,"visible-option-num":3,"show-toolbar":!1,modelValue:n.currentTime,"onUpdate:modelValue":t[0]||(t[0]=m=>n.currentTime=m),formatter:n.formatter,title:"选择时间","columns-type":n.columnsType,onChange:c.onTimeChange},null,8,["modelValue","formatter","columns-type","onChange"])])])]),o("div",rt,[l(I,{modelValue:n.checked,"onUpdate:modelValue":t[1]||(t[1]=m=>n.checked=m)},{default:x(()=>[l(L,{inset:""},{default:x(()=>[(r(!0),u(D,null,O(n.list,(m,V)=>(r(),E(i,{clickable:"",key:m,title:m.keyName,onClick:R=>c.toggle(V,m.keyId)},{"right-icon":x(()=>[l(a,{name:m.keyId},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])])])}const _t=y(tt,[["render",dt],["__scopeId","data-v-4df0d28f"]]);const mt={name:"KonkeSdk4YinYueSrcApp",components:{SceneActionLight:W,SceneActionAc:ve,SceneActionFh:Pe,SceneActionFrishair:et,SceneActionInfrared:_t},data(){return{dev:{userDeviceId:1},show:!1,active:0,roomList:[],deviceList:[],getDevImage:X,type:"",actionShow:{light:!1,ac:!1,floorHeart:!1,freshair:!1,infrared:!0},supportTypeList:["AirCondition","AirFresher","FloorHeating","Light","Curtains"]}},mounted(){this.loadRoomList(),this.getParams()},methods:{onClickLeft(){window.__jsb.pop()},getParams(){let e=window.location.search;const t=Z(e);t!=null&&"type"in t&&(this.type=t.type)},clickDev(e){switch(this.actionShow={light:!1,ac:!1,floorHeart:!1,freshair:!1,infrared:!1},this.dev=e,this.show=!0,e.device.deviceType.cateType){case"Curtains":case"Light":this.actionShow.light=!0;break;case"FloorHeating":this.actionShow.floorHeart=!0;break;case"AirFresher":this.actionShow.freshair=!0;break;case"AirCondition":this.actionShow.ac=!0;break}console.log(this.actionShow)},onActionSelCancel(){console.log("onActionSelCansel")},onActionSelConfirm(e,t,s){console.log("onActionSelConfirm",this.dev.userDeviceId,t);const h={actionType:"Device",delayTime:s,inner:!1,userDeviceId:e.userDeviceId,actionName:t,extension:"",userDevice:e};this.callbackParams(h)},onAcActionSelCancel(){this.actionShow={light:!1,ac:!1,floorheart:!1,freshair:!1,infrared:!1},this.show=!1},onAcActionSelConfirm(e,t,s,h){console.log("onAcActionSelConfirm",this.dev.userDeviceId,t,h);const n={actionType:"Device",delayTime:s,inner:!1,userDeviceId:e.userDeviceId,actionName:t,extension:h,userDevice:e};this.callbackParams(n)},callbackParams(e){window.__jsb.forwardEvent({eventName:"pop",eventData:"",fromPage:"scene-action-dev",toPage:"scene-action-type"}),this.type=="auto"?window.__jsb.forwardEvent({eventName:"addDevAction",eventData:JSON.stringify(e),fromPage:"scene-action-dev",toPage:"scene-auto"}):window.__jsb.forwardEvent({eventName:"addDevAction",eventData:JSON.stringify(e),fromPage:"scene-action-dev",toPage:"scene-manual"}),window.__jsb.pop({route:this.type=="auto"?"scene-auto":"scene-manual"})},loadRoomList(){q().then(e=>{(e.code=200)&&(this.roomList=e.data.roomList,this.roomList!=null&&this.roomList.length>0&&(this.active=this.roomList[0].roomId,this.findRoomDev(this.roomList[0].roomId)))})},findRoomDev(e){Q(e).then(t=>{this.deviceList=$(t.data.userDeviceList),this.deviceList=this.deviceList.filter(s=>{var h,n;return console.log("filter",this.supportTypeList.includes((h=s==null?void 0:s.device)==null?void 0:h.cateType)),this.supportTypeList.includes((n=s==null?void 0:s.device)==null?void 0:n.cateType)})}).catch(t=>console.log(t))},onClickTab(){this.findRoomDev(this.roomList[this.active].roomId)}}},ut={class:"home"},ft={class:"dev"},kt={key:0,class:"no_dev"},pt=["onClick"],vt=["src"],Ct={class:"dev_name"},gt={class:"room_name"};function xt(e,t,s,h,n,c){const f=w,k=B,a=K,i=H,L=g("SceneActionLight"),I=g("SceneActionAc"),m=g("SceneActionFrishair"),V=g("SceneActionFh"),R=g("SceneActionInfrared"),M=ee;return r(),u("div",ut,[l(f,{class:"nav_bar",title:"选择设备动作",onClickLeft:c.onClickLeft},null,8,["onClickLeft"]),l(a,{active:n.active,"onUpdate:active":t[0]||(t[0]=d=>n.active=d),onClickTab:c.onClickTab,color:"#FD7D28","title-active-color":"#FD7D28","title-inactive-color":"#666666",sticky:"",animated:"",shrink:""},{default:x(()=>[(r(!0),u(D,null,O(n.roomList,d=>(r(),E(k,{title:d.roomName},null,8,["title"]))),256))]),_:1},8,["active","onClickTab"]),o("div",ft,[n.deviceList==null||n.deviceList.length==0?(r(),u("div",kt,[l(i,{"image-size":"80",description:"房间下没有设备"})])):(r(!0),u(D,{key:1},O(n.deviceList,d=>{var F;return r(),u("div",{class:"dev_list",onClick:wt=>{c.clickDev(d)}},[o("img",{class:"dev_icon",src:n.getDevImage((F=d==null?void 0:d.device)==null?void 0:F.cateType)},null,8,vt),o("div",Ct,[o("span",gt,_(d.deviceName),1)])],8,pt)}),256))]),l(M,{show:n.show,"onUpdate:show":t[1]||(t[1]=d=>n.show=d),position:"bottom"},{default:x(()=>[v(l(L,{dev:n.dev,onOnCancal:c.onActionSelCancel,onOnConfirm:c.onActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.light]]),v(l(I,{dev:n.dev,onOnCancal:c.onAcActionSelCancel,onOnConfirm:c.onAcActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.ac]]),v(l(m,{dev:n.dev,onOnCancal:c.onAcActionSelCancel,onOnConfirm:c.onAcActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.freshair]]),v(l(V,{dev:n.dev,onOnCancal:c.onAcActionSelCancel,onOnConfirm:c.onAcActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.floorHeart]]),v(l(R,{dev:n.dev,onOnCancal:c.onAcActionSelCancel,onOnConfirm:c.onAcActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.infrared]])]),_:1},8,["show"])])}const yt=y(mt,[["render",xt],["__scopeId","data-v-6cca3fc4"]]);j(yt).mount("#root");
